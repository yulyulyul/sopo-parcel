Configuration:
  name: Default
  status: warn
  debug: true

  Properties:
    Property:
      - name: service
        value: parcel
      - name: log-path
        value: logs
      - name: color-filter
        value: FATAL=Bright red, ERROR=Bright red, WARN=Yellow, INFO=Green, DEBUG=Cyan, TRACE=White
      - name: log-pattern
        value: "%d{yyyy-MM-dd HH:mm:ss.SSS} %highlight{[%-5level %X{traceId}/%X{spanId}]%throwable}{${color-filter}} [%t{1.}] %style{%c{1.}}{MAGENTA} (%F:%L) - %msg%n"

  Appenders:
    Console:
      name: CONSOLE
      target: SYSTEM_OUT
      PatternLayout:
        pattern: ${log-pattern}

    RollingFile:
      - name: File
        fileName: ${log-path}/${service}_service.log
        filePattern: ${log-path}/${service}_service.log.%d{yyyy-MM-dd}.gz
        PatternLayout:
          pattern: ${log-pattern}
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 1
      - name: JsonFile
        fileName: ${log-path}/${service}_service.json
        filePattern: ${log-path}/${service}_service.json.%d{yyyy-MM-dd}.gz
        Policies:
          TimeBasedTriggeringPolicy:
            interval: 1
        JsonTemplateLayout:
          stackTraceEnabled: true
          eventTemplateUri: classpath:LogstashJsonEventLayoutV1.json
          eventTemplateAdditionalField:
            - key: data_type
              value: "$${event:Marker:-LOG}"

  Loggers:
    Root:
        level: debug
        additivity: false
        AppenderRef:
          - ref: File
          - ref: JsonFile
          - ref: CONSOLE

    Logger:
      - name: team.sopo
        level: debug
      - name: org.hibernate.type.descriptor.sql.BasicBinder
        level: trace
      - name: com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient
        level: fatal
      - name: com.hubspot.slack.client.interceptors.http
        level: fatal
